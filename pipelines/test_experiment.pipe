#
# Testing connections to serializer process
#
process exp :: diva_experiment
  experiment_file_name = etc/rc3d_experiment.yml

process sim :: detected_object_input
        file_name = none
        reader:type = simulator
        reader:simulator:center_x = 100
        reader:simulator:center_y = 100
        reader:simulator:dx = 10
        reader:simulator:dy = 10
        reader:simulator:height = 200
        reader:simulator:width = 200
        reader:simulator:detection_class = "simulated"

# --------------------------------------------------
 process ser :: serializer
        serialization_type = protobuf 

 connect from exp.image to ser.img/image
 connect from exp.timestamp to ser.img/timestamp
 connect from sim.detected_object_set to ser.img/detected_object_set

 connect from sim.detected_object_set   to ser.dos/detected_object_set 
 connect from exp.timestamp             to ser.dos/timestamp
# --------------------------------------------------
 process zmq :: zmq_transport_send
        port = 5560
        expected_subscribers = 2
 connect from ser.img to zmq.serialized_message

# -------------------------------------------------
 process zmq_two :: zmq_transport_send
        port = 6560
 
 connect from ser.dos to zmq_two.serialized_message
